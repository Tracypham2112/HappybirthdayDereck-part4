<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dear Dereck ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#0d0d12; --bg2:#151521; --pink:#ff4d88; --pink2:#ff97b3; --rose:#ff3366; --white:#fff;
  --drawDur: 3.6s; /* th·ªùi gian line v·∫Ω */
}

/* Layout */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; display:flex; align-items:center; justify-content:center; flex-direction:column;
  background: radial-gradient(1200px 700px at 50% 40%, #1b1b2e 0%, #0f0f19 60%, #040409 100%);
  overflow:hidden; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}

/* Title */
h1{
  font-family: 'Dancing Script', cursive;
  font-size: clamp(32px,5vw,64px);
  margin: 10px 12px 8px;
  color: #ffd7e3;
  letter-spacing: .5px;
  text-shadow: 0 0 10px rgba(255,160,190,.45), 0 0 30px rgba(255,90,140,.35);
  animation: titleGlow 2.5s ease-in-out infinite alternate;
  user-select:none
}
@keyframes titleGlow{
  from{ text-shadow: 0 0 8px rgba(255,160,190,.35), 0 0 18px rgba(255,90,140,.3) }
  to  { text-shadow: 0 0 16px rgba(255,190,210,.8), 0 0 40px rgba(255,110,160,.6) }
}

/* Canvas t·∫ßng sparkles r·∫•t nh·∫π */
.sparkle-layer{
  position:fixed; inset:0; pointer-events:none; z-index:0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.10) 50%, transparent 52%),
    radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,.08) 50%, transparent 52%),
    radial-gradient(2px 2px at 40% 80%, rgba(255,255,255,.06) 50%, transparent 52%),
    radial-gradient(2px 2px at 85% 25%, rgba(255,255,255,.10) 50%, transparent 52%);
  animation: twinkle 6s ease-in-out infinite alternate;
}
@keyframes twinkle{
  from{ opacity:.6; filter:brightness(1)}
  to  { opacity:.95; filter:brightness(1.2)}
}

/* SVG HEART section */
.stage{
  position:relative; z-index:1;
  width:min(92vw, 820px); display:flex; justify-content:center; align-items:center;
}
svg{
  width:100%; height:auto; overflow:visible;
  filter: drop-shadow(0 10px 25px rgba(255,70,120,.15));
}

/* LINE v·∫Ω */
#heart-line{
  fill:none; stroke:var(--pink); stroke-width:2.8; stroke-linecap:round; stroke-linejoin:round;
  stroke-dasharray: 2000; stroke-dashoffset: 2000;
  animation: draw var(--drawDur) linear forwards, strokeGlow 2.4s ease-in-out infinite alternate;
}
@keyframes draw{ to{ stroke-dashoffset:0 } }
@keyframes strokeGlow{
  from{ stroke: var(--pink) }
  to  { stroke: var(--pink2) }
}

/* PH·∫¶N TIM FILL ƒë·∫≠p m√£i m√£i ‚Äì xu·∫•t hi·ªán sau khi line v·∫Ω xong */
#heart-fill{
  transform-origin: 50% 50%;
  fill: url(#gradHeart);
  opacity:0; transform: scale(.9);
  filter: drop-shadow(0 0 12px rgba(255,80,130,.5));
  animation:
    appear .001s ease forwards calc(var(--drawDur) + .05s),
    beat 1.1s ease-in-out calc(var(--drawDur) + .05s) infinite;
}
@keyframes appear{ to{ opacity:1; transform:scale(1)} }
@keyframes beat{
  0%,100%{ transform:scale(1); filter: drop-shadow(0 0 14px rgba(255,120,160,.65)) }
  35%    { transform:scale(1.14); filter: drop-shadow(0 0 28px rgba(255,160,190,.9)) }
  60%    { transform:scale(1.02) }
}

/* L·ªùi nh·∫Øn bay l√™n ng·∫´u nhi√™n */
.toast{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom: -10vh; padding:.55rem .9rem; border-radius:999px;
  background: rgba(255,255,255,.08); color:#ffdce6; border:1px solid rgba(255,120,160,.35);
  font-weight:600; letter-spacing:.2px; backdrop-filter: blur(6px);
  box-shadow: 0 6px 24px rgba(0,0,0,.35);
  animation: floatUp 4.5s ease forwards;
  z-index:3; white-space:nowrap; user-select:none
}
@keyframes floatUp{
  0%{ transform:translate(-50%, 20px); opacity:0 }
  10%{ opacity:1 }
  80%{ transform:translate(-50%, -46vh); opacity:.95 }
  100%{ transform:translate(-50%, -60vh); opacity:0 }
}

/* B√≥ng bay */
#balloon-layer{ position:fixed; inset:0; pointer-events:none; z-index:2 }
.balloon{
  position:absolute; bottom:-120px; width:34px; height:44px; border-radius:50% 50% 48% 48%;
  background: var(--pink);
  box-shadow: inset -6px -10px 14px rgba(0,0,0,.2), 0 6px 18px rgba(255,90,140,.25);
  animation: rise var(--riseDur) linear forwards;
}
.balloon::after{ /* d√¢y */
  content:""; position:absolute; left:50%; bottom:-22px; width:1.5px; height:26px; background:rgba(255,255,255,.6);
  transform:translateX(-50%);
}
.balloon::before{ /* highlight */
  content:""; position:absolute; top:8px; left:9px; width:7px; height:14px; border-radius:999px;
  background:rgba(255,255,255,.7); filter:blur(.4px);
}
@keyframes rise{
  to{ transform: translateY(-120vh) translateX(var(--drift)); opacity:.95 }
}

/* Fireworks c·ª±c nh·∫π (particle div) */
.fx{ position: fixed; width:2px; height:2px; background:#fff; left:0; top:0; pointer-events:none; z-index:4 }
.particle{
  position:absolute; width:4px; height:4px; border-radius:50%;
  background: currentColor; left:0; top:0; transform-origin:0 0;
  animation: boom .85s ease-out forwards;
}
@keyframes boom{
  0%{ transform: rotate(var(--deg)) translate(0); opacity:1 }
  85%{ opacity:1 }
  100%{ transform: rotate(var(--deg)) translate(var(--len)); opacity:0 }
}

/* Toolbar n√∫t t∆∞∆°ng t√°c */
.toolbar{
  position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%);
  display:flex; gap:10px; z-index:5; backdrop-filter: blur(8px);
  background: rgba(255,255,255,.06); border:1px solid rgba(255,120,160,.35);
  border-radius: 999px; padding:8px;
  box-shadow: 0 10px 28px rgba(0,0,0,.35);
}
button.ctrl{
  all:unset; cursor:pointer; padding:10px 14px; border-radius:999px; font-weight:700;
  color:#ffe6ef; letter-spacing:.2px; user-select:none;
  transition: transform .18s ease, background .18s ease;
}
button.ctrl:hover{ transform: translateY(-1px) scale(1.03) }
button.ctrl:active{ transform: translateY(0) scale(.98) }
button.primary{ background: linear-gradient(135deg,#ff4d88,#ff7aa8); }
button.secondary{ background: linear-gradient(135deg,#6c5ce7,#a66cff) }
button.ghost{ background: linear-gradient(135deg,#2d9,#2bb); color:#042; font-weight:800 }

/* Modal b√≠ m·∫≠t */
.modal{
  position:fixed; inset:0; display:none; place-items:center; z-index:6;
  background: rgba(0,0,0,.45); backdrop-filter: blur(4px);
}
.modal.show{ display:grid; animation: fadeIn .25s ease }
.card{
  width:min(86vw, 560px); border-radius:22px; padding:22px 22px 18px;
  background: radial-gradient(180px 160px at 20% 0%, rgba(255,180,205,.18), transparent 60%),
              rgba(20,20,32,.92);
  border:1px solid rgba(255,120,160,.35);
  color:#ffe7ef; box-shadow: 0 12px 40px rgba(0,0,0,.55);
}
.card h3{
  margin:.2rem 0 .4rem; font-size: clamp(22px,3.5vw,32px); font-family:'Dancing Script', cursive
}
.card p{
  margin:.2rem 0 .2rem; font-size: clamp(14px,2.6vw,18px); line-height:1.55
}
.card .close{
  float:right; cursor:pointer; font-weight:800; padding:.2rem .6rem; border-radius:999px;
  background: rgba(255,255,255,.08)
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>

<body>
  <div class="sparkle-layer" aria-hidden="true"></div>

  <h1>Dear Dereck üíå</h1>

  <div class="stage">
    <!-- SVG gi·ªØ line v·∫Ω + tim ƒë·∫≠p -->
    <svg viewBox="0 0 100 90" role="img" aria-label="Heart animation">
      <defs>
        <linearGradient id="gradHeart" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="#ff8eb0"/>
          <stop offset="60%" stop-color="#ff4d88"/>
          <stop offset="100%" stop-color="#ff2f6f"/>
        </linearGradient>
      </defs>

      <!-- Outline line v·∫Ω tr√°i tim -->
      <path id="heart-line"
            d="M10,30
               A20,20 0 0,1 50,30
               A20,20 0 0,1 90,30
               Q90,60 50,88
               Q10,60 10,30 Z" />

      <!-- Fill tr√°i tim: xu·∫•t hi·ªán sau khi v·∫Ω xong, r·ªìi ƒë·∫≠p m√£i -->
      <path id="heart-fill"
            d="M10,30
               A20,20 0 0,1 50,30
               A20,20 0 0,1 90,30
               Q90,60 50,88
               Q10,60 10,30 Z" />
    </svg>
  </div>

  <!-- Layer cho b√≥ng bay -->
  <div id="balloon-layer" aria-hidden="true"></div>

  <!-- Toolbar -->
  <div class="toolbar">
    <button class="ctrl primary" id="btnBalloons">üéà Balloons</button>
    <button class="ctrl secondary" id="btnFireworks">üéÜ Fireworks</button>
    <button class="ctrl ghost" id="btnMessage">üíå Secret</button>
  </div>

  <!-- Modal b√≠ m·∫≠t -->
  <div class="modal" id="modal">
    <div class="card">
      <span class="close" id="closeModal">‚úï</span>
      <h3>To: Dereck</h3>
      <p>No me importa tu pasado. Me import√°s vos ‚Äì en tu presente.</p>
      <p>El futuro no lo s√©, pero por ahora‚Ä¶ <b>quiero ser tu Fluoxetina</b>. ‚ù§Ô∏è</p>
      <p style="margin-top:.6rem;opacity:.9">Always happy! Dereck</p>
    </div>
  </div>

<script>
/* ---------- L·ªùi nh·∫Øn bay ng·∫´u nhi√™n ---------- */
const quotes = [
  "You are my favorite notification ‚ú®",
  "I love you. Again & again. üíñ",
  "Happier with you, always.",
  "Mi paz es estar contigo üåô",
  "You + Me = Home üè†",
  "Always happy! Dereck"
];
function spawnToast(text){
  const el = document.createElement('div');
  el.className = 'toast';
  el.textContent = text;
  el.style.left = (30 + Math.random()*40) + '%';
  el.style.fontSize = (14 + Math.random()*4) + 'px';
  document.body.appendChild(el);
  setTimeout(()=> el.remove(), 4800);
}
// T·ª± hi·ªán l·ªùi nh·∫Øn m·ªói ~5s (r·∫•t nh·∫π)
setInterval(()=> spawnToast(quotes[Math.floor(Math.random()*quotes.length)]), 5200);

/* ---------- B√≥ng bay ---------- */
const balloonLayer = document.getElementById('balloon-layer');
function spawnBalloon(){
  const b = document.createElement('div');
  b.className = 'balloon';
  const colors = ['#ff6fa3','#ffd166','#6ecbff','#a0ff8f','#c59dff','#ff8ea1'];
  b.style.background = colors[Math.floor(Math.random()*colors.length)];
  b.style.left = Math.random()*100 + 'vw';
  b.style.setProperty('--riseDur', (7 + Math.random()*6) + 's');
  b.style.setProperty('--drift', ((Math.random()*2-1)*40)+'px'); // tr√¥i ngang nh·∫π
  balloonLayer.appendChild(b);
  // d·ªçn d·∫πp khi bay xong
  const dur = parseFloat(getComputedStyle(b).getPropertyValue('--riseDur'))*1000;
  setTimeout(()=> b.remove(), dur+400);
}
function burstBalloons(n=10){ for(let i=0;i<n;i++) setTimeout(spawnBalloon, i*120) }

document.getElementById('btnBalloons').addEventListener('click', ()=> burstBalloons(16));

/* ---------- Fireworks r·∫•t nh·∫π ---------- */
function fireworks(x, y, count=18){
  const fx = document.createElement('div');
  fx.className = 'fx';
  fx.style.left = (x-2)+'px';
  fx.style.top  = (y-2)+'px';
  const palette = ['#ffb3c7','#ffd166','#8fd3ff','#a0ff8f','#c59dff','#ff7aa8','#fff'];
  for(let i=0;i<count;i++){
    const p = document.createElement('span');
    p.className = 'particle';
    p.style.color = palette[i%palette.length];
    p.style.setProperty('--deg', (i*(360/count))+'deg');
    p.style.setProperty('--len', (40 + Math.random()*36) + 'px');
    fx.appendChild(p);
  }
  document.body.appendChild(fx);
  setTimeout(()=> fx.remove(), 900);
}
document.getElementById('btnFireworks').addEventListener('click', (e)=>{
  const rect = e.target.getBoundingClientRect();
  fireworks(rect.left+rect.width/2, rect.top-10, 20);
  // th√™m 2 ph√°t l·ªách cho ·∫•n t∆∞·ª£ng
  setTimeout(()=> fireworks(window.innerWidth*0.25, window.innerHeight*0.35, 16), 150);
  setTimeout(()=> fireworks(window.innerWidth*0.75, window.innerHeight*0.38, 16), 280);
});
// Tap/click b·∫•t k·ª≥ c≈©ng b·∫Øn 1 ph√°t n√® (nh·∫π th√¥i)
document.addEventListener('click', (e)=>{
  if (e.target.closest('.toolbar') || e.target.closest('.modal')) return;
  fireworks(e.clientX, e.clientY, 14);
}, {passive:true});

/* ---------- Modal b√≠ m·∫≠t ---------- */
const modal = document.getElementById('modal');
document.getElementById('btnMessage').addEventListener('click', ()=> modal.classList.add('show'));
document.getElementById('closeModal').addEventListener('click', ()=> modal.classList.remove('show'));
modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('show')});

/* ---------- T·ªëi ∆∞u sync: khi line v·∫Ω xong ‚Üí t·∫°o √≠t hi·ªáu ·ª©ng ---------- */
const heartLine = document.getElementById('heart-line');
heartLine.addEventListener('animationend', (ev)=>{
  if(ev.animationName==='draw'){
    // t·∫°o 1-2 b√≥ng bay v√† 1 ph√°o hoa nh·∫π ngay khi tim hi·ªán
    burstBalloons(6);
    setTimeout(()=> fireworks(window.innerWidth*0.5, window.innerHeight*0.28, 18), 120);
  }
});
</script>
</body>
</html>

